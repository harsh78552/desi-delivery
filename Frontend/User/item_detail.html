<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png/jpg" href="../image/myImage.jpg">
    <title>Food Detail</title>

    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial;
            background: #f5f5f5;
        }

        .card {
            background: white;
            padding: 20px;
            max-width: 500px;
            margin: auto;
            border-radius: 15px;
            box-shadow: 0 4px 10px #bbb;
            text-align: center;
        }

        img {
            width: 100%;
            height: 260px;
            object-fit: cover;
            border-radius: 10px;
        }

        .qty-box {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        button {
            padding: 10px 20px;
            border: none;
            background: orange;
            cursor: pointer;
            border-radius: 6px;
            font-size: 16px;
        }

        .order-btn { background: #ff6600; color: white; }
        .cart-btn { background: #28a745; color: white; }
    </style>
</head>
<body>

<div id="food-detail">Loading...</div>

<script>

    async function loadFoodDetail() {
        const category = localStorage.getItem("selectedCategory");
        const itemName = localStorage.getItem("selectedItemName");
        const token = localStorage.getItem("userToken");

        if (!category || !itemName) {
            document.getElementById("food-detail").innerHTML =
                "<b>No item selected.</b>";
            return;
        }

        try {
            const res = await fetch(
                `https://desi-delivery.onrender.com/menu/item?category=${category}&item_name=${itemName}`,
                {
                    method: "GET",
                     headers: { "Authorization": "Bearer " + token, "Content-Type":"application/json" }
                }
            );

            const item = await res.json();

            document.getElementById("food-detail").innerHTML = `
                <div class="card">
                    <img src="${item.image_url}" alt="">
                    <h2>${item.food_name}</h2>
                    <p>${item.descriptions}</p>
                    <h3>â‚¹${item.price}</h3>

                    <div class="qty-box">
                        <button onclick="changeQty(-1)">-</button>
                        <span id="qty">1</span>
                        <button onclick="changeQty(1)">+</button>
                    </div>

                    <button class="cart-btn" onclick="addToCart()">Add to Cart</button>
                    <button class="order-btn">Order Now</button>
                </div>
            `;
        }
        catch (err) {
            document.getElementById("food-detail").innerHTML =
                "<b>Error loading item.</b>";
            console.log(err);

        }
    }

    function changeQty(value) {
        let qty = parseInt(document.getElementById("qty").innerText);
        qty += value;
        if (qty < 1) qty = 1;
        document.getElementById("qty").innerText = qty;
    }

    function addToCart() {
        const qty = parseInt(document.getElementById("qty").innerText);
        alert("Added to cart - Qty: " + qty);
    }

    loadFoodDetail();
</script>

</body>
</html>
